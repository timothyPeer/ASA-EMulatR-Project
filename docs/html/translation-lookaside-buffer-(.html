<!DOCTYPE html>
<html>
<head>
   <title>Introduction &gt; Platform Architectures &gt; Alpha Architecture &gt; Virtual Address Space — Overview &gt; Memory Management &gt; Caching &gt; Translation Lookaside Buffer (TLB)</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="Cache, &nbsp;Translation Lookaside Buffer,Cache, Least Recently Used (LRU),Galaxy,Invalidation, Cache,Invalidation, Page,Least Recently Used,LRU,Translation Lookaside Buffer" />
   <meta name="description" content="A Translation Lookaside Buffer (TLB) is a small, fast hardware cache that holds a subset of the processor’s page‐table entries—i.e. recently used virtual→physical..." />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        min-height: 60px; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        background: #2C5D88;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { min-height: 59px;}             
      #idheader h1 span { color: #FFF }     
      #idnav {
        text-align: right;
        width: 126px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_orange.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; }
	  p.help-url a:link { font-size: 50%; text-decoration: none; color: black; }
	  p.help-url a:visited { color: black; }
	  p.help-url a:hover { font-size: 95%; text-decoration: underline; }
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
	  a#printbuttonlink { cursor: pointer; }
      a.hmanchor { display: inline-block; margin-top: -4em; padding-top: 4em; }  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "translation-lookaside-buffer-(.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Translation Lookaside Buffer (TLB)</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:middle">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.html?translation-lookaside-buffer-(.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      <a href="introduction.html">Introduction</a> &gt; <a href="platform-architectures.html">Platform Architectures</a> &gt; <a href="architecture.html">Alpha Architecture</a> &gt; <a href="virtualization-address-space.html">Virtual Address Space — Overview</a> &gt; <a href="memory-management.html">Memory Management</a> &gt; <a href="caching---instruction.html">Caching</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Translation Lookaside Buffer (TLB)</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="l3-shared-(smp)-unifiedcache.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="caching---instruction.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="safememory-claude.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<p class="p_Normal">A Translation Lookaside Buffer (TLB) is a small, fast hardware cache that holds a subset of the processor’s page‐table entries—i.e. recently used virtual→physical mappings—along with permission bits (read/write/execute), “referenced”/“dirty” flags, and an Address Space Number (ASN). In an Alpha‐based system (and thus in an ASA-EMulatR), the TLB’s job is twofold:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="font-weight:bold;display:inline-block;width:20px;margin-left:-20px">1.</span><span style="font-weight: bold;">Accelerate address translation</span></p>
<p class="p_Normal" style="margin: 0 0 0 13px;">Without a TLB, every memory access would require walking the full page table in main memory (or invoking a microcoded PAL routine). That is very slow. By caching a handful of page mappings in the TLB, the CPU can translate virtual addresses to physical addresses on most accesses in a single cycle (or just a few cycles in an emulator), rather than doing a full page‐table lookup each time.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin: 0 0 0 13px;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a.</span>Caches recently used page‐table entries so that a majority of memory accesses avoid a full page-table walk.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin: 0 0 0 13px;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b.</span>Each TLBEntry holds (VPN, ASN) → PFN plus permission bits, so a simple lookup yields (physBaseAddress | pageOffset).</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="font-weight:bold;display:inline-block;width:20px;margin-left:-20px">2.</span><span style="font-weight: bold;">Enforce memory‐protection semantics</span></p>
<p class="p_Normal" style="margin: 0 0 0 13px;">Each TLB entry carries protection bits (valid, writable, executable) plus “referenced” and “dirty” flags. On every load/store/fetch, the CPU checks those bits to decide if the access is allowed or whether it should trap (e.g. for a page fault, protection violation, or coherence action). The TLB also tracks which pages have been “referenced” or “dirtied,” so later page‐table updates (or OS routines) can see which pages need write‐back or cleaning.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin: 0 0 0 13px;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a)</span>On every access—load, store, or instruction fetch—the emulator probes the TLB first.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin: 0 0 0 13px;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b)</span>If lookup() returns a non-null TLBEntry*, the emulator checks:</p>
<p class="p_Normal" style="margin: 0 0 0 13px;">&nbsp;</p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">if&nbsp;(!e-&gt;isValid())&nbsp;&nbsp;&nbsp;→&nbsp;raise&nbsp;“TLB&nbsp;invalid”&nbsp;(shouldn’t&nbsp;happen&nbsp;if&nbsp;`isValid()`&nbsp;is&nbsp;true)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">if&nbsp;(isInstructionFetch&nbsp;&amp;&amp;&nbsp;!e-&gt;isExecutable())&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;trap&nbsp;“execute&nbsp;permission&nbsp;violation”</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">if&nbsp;(isStore&nbsp;&amp;&amp;&nbsp;!e-&gt;isWritable())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;trap&nbsp;“write&nbsp;protection&nbsp;violation”</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a)</span>If&nbsp;none&nbsp;of&nbsp;these&nbsp;conditions&nbsp;are&nbsp;violated,&nbsp;the&nbsp;emulator&nbsp;proceeds&nbsp;with&nbsp;the&nbsp;access.&nbsp;It&nbsp;also&nbsp;sets&nbsp;e-&gt;setReferenced(true)&nbsp;(and&nbsp;e-&gt;setDirty(true)&nbsp;if&nbsp;it&nbsp;was&nbsp;a&nbsp;store).</p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="font-weight:bold;display:inline-block;width:20px;margin-left:-20px">3.</span><span style="font-weight: bold;">Referenced/Dirty&nbsp;Bit&nbsp;Emulation</span></p>
<p class="p_CodeExample" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_CodeExample" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_CodeExample">Hardware&nbsp;sets&nbsp;the&nbsp;“referenced”&nbsp;bit&nbsp;on&nbsp;reads/fetches&nbsp;and&nbsp;the&nbsp;“dirty”&nbsp;bit&nbsp;on&nbsp;writes.&nbsp;We&nbsp;mirror&nbsp;that&nbsp;by&nbsp;doing:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">entry-&gt;setReferenced(true);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">if&nbsp;(isStore)&nbsp;entry-&gt;setDirty(true);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">4.</span>When the OS examines the PTEs (e.g. for page replacement), our TLB write-back logic ensures these flags get propagated back to the page table. Typically, after a TLB miss, the emulator would do:</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a.</span>Walk the page tables to find the new PTE.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b.</span>Extract “referenced” and “dirty” from the PTE (if any).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">c.</span>Create a new TLBEntry newEntry; … newEntry.setReferenced(…), etc.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">d.</span>Call TLBSystem::insert(newEntry).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">5.</span><span style="font-weight: bold;">LRU Replacement</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a.</span>Each time we hit or insert an entry, we update that entry’s m_lastUsed = ++m_ageCounter.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b.</span>On insertion when all slots are valid, we scan m_lastUsed and evict the entry whose m_lastUsed is smallest (oldest). This is a standard software‐simulated LRU.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">6.</span><span style="font-weight: bold;">Invalidation Hooks (PAL Instructions &amp; OS Updates)</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a.</span>invalidateEntry(virtualPage, asn): corresponds to PAL instructions like PAL_TBIS (invalidate single mapping). Also used if the OS updates a page table for that (VPN, ASN).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b.</span>invalidateByASN(asn): corresponds to “Invalidate all TLB entries for this ASN” (e.g. certain PAL calls or when the OS does a process-wide flush).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">c.</span>invalidateAll(): corresponds to “Invalidate everything” (e.g. PAL_TBIA global flush).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">7.</span><span style="font-weight: bold;">Separate I-TLB (<a href="l1cache.html" class="topiclink">L1 I-Cache)</a> vs. D-TLB (<a href="l2cache.html" class="topiclink">L2 D-Cache)</a></span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">a.</span>Although our implementation uses a single m_entries vector, each TLBEntry has isInstructionEntry = true/false.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">b.</span>On an instruction-fetch, the emulator calls lookup(virtPage, asn) but then checks that e-&gt;getIsInstructionEntry() == true; if not, it’s considered a miss (so it won’t reuse a data entry for instruction fetch).</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 40px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">c.</span>Conversely, on data load/store, we look for isInstructionEntry() == false.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-style: italic; font-weight: bold;">Why is it needed: </span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Performance</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>Without a TLB, every load/store/fetch would do a full page‐table walk (which involves at least one or two memory references per level of the page table). Even if the emulator stores page tables in a fast C++ data structure, the overhead is enormous compared to a simple in‐memory lookup in a small QVector&lt;TLBEntry&gt;.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>By caching “hot” mappings, we reduce the cost of most memory accesses to a few lines of C++ code and a linear scan of, say, 64 entries—trivially faster than a multi‐level table walk.</p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">Every memory access in the emulator goes through TLBSystem::lookup(). On a hit, the ASA-EMulatR checks TLBEntry’s permission bits, sets referenced/dirty, and computes the physical address. On a miss, it walks the page tables (or calls PAL code), constructs a new TLBEntry, and calls insert(). PAL instructions and OS-driven page-table updates use the invalidate*() methods to keep the software TLB state coherent with the page tables.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">This layered design—CPU → TLBSystem → PageTableWalk → PhysicalMemory—ensures both correctness (matching Alpha’s VM semantics exactly) and performance (most accesses served by a tiny cache of TLB entries rather than a full multi-level table walk).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Correct Alpha Semantics</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>Alpha hardware sets “referenced” on reads/fetches and “dirty” on writes in the TLB entry, then pushes those bits back into the page table only on eviction or explicit flush. Many OS page‐replacement algorithms rely on exactly that behavior.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>If we bypassed a TLB entirely and always manipulated PTEs directly, we would have to replicate that entire “on-access set‐bit” logic for every read/write. The TLB model isolates it into one place.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>Similarly, ASNs let Alpha avoid flushing the entire TLB on every context switch. If your emulator simply flushed the entire TLB on every switch, it would still function, but performance and OS‐behavior fidelity would suffer drastically.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">PAL-code Compatibility</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>The Alpha PAL instructions PAL_TBIS, PAL_TBIA require precise TLB invalidation semantics. By centralizing that logic in TLBSystem, our emulator can implement PAL traps by calling the appropriate invalidate*() methods, matching the hardware’s effect exactly.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Separate I- and D- TLBs</span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>Real Alpha hardware has separate instruction and data TLBs, so an instruction fetch never accidentally reuses a data entry. By tagging each TLBEntry with isInstructionEntry, we mirror that behavior.</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>Without a TLB, instruction fetch could be treated just like a data load in software, but that would diverge from real hardware (and break certain self-modifying code or protected-mode quirks on Alpha).</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">As Implemented Here: </span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The TLB is implemented as an internal component of the <a href="alphamemorysystem-claude.html" class="topiclink">AlphaMemorySystem</a> and is vectored to each <a href="alphacpu-claude.html" class="topiclink">AlphaCPU</a> . &nbsp;The TLB instance is private to each CPU. &nbsp; The practical vector-size is coded to a maximum 16 CPUs - though in practice, for non-Galaxy implementations, one to four CPUs will be implemented. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-style: italic;">The TLB consists of two elements: </span></p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">1.</span>A fixed high-performant Vector (array) </p>
<p class="p_Normal" style="text-indent: 0; padding-left: 20px; margin-left: 0;"><span class="f_Normal" style="display:inline-block;width:20px;margin-left:-20px">2.</span>A TLB entry which is owned directly (by-value) and maintained in the Vector array.</p>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;"><table style="border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; width:509px; padding:0; border:none"><p class="p_Normal"><span class="f_CodeExample" style="font-size: 11px;"> TLBEntry </span></p>
</td>
<td style="vertical-align:top; width:1729px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Property Implementation</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:509px; padding:0; border:none"><p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;virtualPage&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;physicalPage&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;asn&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;protection&nbsp;:&nbsp;quint32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;valid&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;dirty&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;referenced&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;executable&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;granularity&nbsp;:&nbsp;quint8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;m_slotIndex&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;m_lastUsed&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;isInstructionEntry&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;TLBEntry()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;TLBEntry(const&nbsp;TLBEntry&amp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;operator=(const&nbsp;TLBEntry&amp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getVirtualAddress()&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getPhysicalAddress()&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getAsn()&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getProtection()&nbsp;:&nbsp;quint32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;isValid()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;isWritable()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;isExecutable()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;isReferenced()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;isDirty()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getGranularity()&nbsp;:&nbsp;quint8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getSlotIndex()&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getLastUsed()&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;getIsInstructionEntry()&nbsp;:&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setVirtualPage(quint64)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setPhysicalPage(quint64)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setAsn(quint64)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setProtection(quint32)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setValid(bool)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setReferenced(bool)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setDirty(bool)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setExecutable(bool)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setGranularity(quint8)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setSlotIndex(quint64)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setLastUsed(quint64)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;setIsInstructionEntry(bool)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
</td>
<td style="vertical-align:top; width:1729px; padding:0; border:none"><p class="p_Normal"><span style="font-size: 11px;">A single TLB “slot,” which holds all metadata for a cached virtual→physical mapping. Each TLBEntry packs:</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint64 virtualPage</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• The virtual page number (VPN) of this mapping.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Computed by (virtualAddress ≫ pageSizeBits) before lookup.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint64 physicalPage</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• The corresponding physical page‐frame number (PFN).</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• When a TLB hit occurs, the physical address is assembled as (physicalPage « pageSizeBits) | (pageOffset).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint64 asn</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Address Space Number (ASN) tagging: in Alpha, each process (or “address space”) has its own ASN.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Two different processes may map the same virtual page to different physical pages, so we store the ASN to ensure that lookup() only hits if (VPN, ASN) match.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes" style="font-weight: bold;">Important Distinction:</span><span class="f_Notes"> An ASN (Address Space Number) is the tag that distinguishes one process’s page mappings from another’s. It records which address space (i.e. which “process”) this particular virtual→physical mapping belongs to. Later, when the CPU performs a lookup, it only considers an entry a hit if both entry.getVirtualAddress()==vpn and entry.getAsn()==currentASN. If the ASNs don’t match, that entry is treated as invalid for the current process. If no entry’s ASN matches, it’s a miss—even if the same VPN exists in the array under a different ASN.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">When the OS does a context switch, it simply changes currentASN (the emulator’s active AS number) and does not flush the entire TLB. Entries belonging to other ASNs remain in place, but they won’t match until their entry.getAsn() equals the new currentASN.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">f the OS needs to force a flush of only the old process’s mappings, it calls invalidateByASN(oldASN). That method walks every slot and invalidates any entry whose entry.getAsn() == oldASN (unless it’s tagged global). Because each entry retains its asn, the TLBSystem can selectively clear just those entries rather than dropping everything.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">Thus: </span></p>
<p class="p_Notes" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Notes" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Notes">TLBEntry::asn stores the Address Space Number for that one mapping.</span></p>
<p class="p_Notes" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Notes" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Notes">TLBSystem’s lookup/insert/invalidate methods always compare or filter by that ASN value, so each process’s entries remain isolated in the same physical TLB array.</span></p>
<p class="p_Notes" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Notes" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Notes">On a context switch, changing the emulator’s active ASN automatically causes all entries with a different entry.getAsn() to be treated as misses, preserving “process isolation” without needing to flush every slot.</span></p>
<p class="p_Notes"><span class="f_Notes">&nbsp;</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint32 protection</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Bitmask encoding the valid/read/write/execute bits as provided by page‐table entries (or PAL routines).</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Used in isValid(), isWritable(), isExecutable() to enforce access rights.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">bool valid</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Whether this entry has been initialized and may be used for translation. Set to true by TLBSystem::insert() when the slot is filled.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• isValid() returns valid &amp;&amp; (protection &amp; TLB_VALID).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">bool dirty</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Set to true whenever a write occurs through this mapping. Reflects the “dirty” bit in hardware, so that OS page‐replacement code can know whether a page must be written back.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">bool referenced</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Set to true whenever a read or execute occurs through this mapping. Mirrors the hardware “referenced” bit used by many page‐replacement algorithms.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">bool executable</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• True if this mapping may be used for instruction fetches.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• A D-TLB entry almost always has executable = false, while an I-TLB entry has executable = true.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint8 granularity</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Indicates page‐size for this mapping (e.g. 4 KB, 8 KB, 64 KB). On Alpha, different page‐table levels can produce different page sizes, so we track it to reconstruct physical addresses and validate offsets.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint64 m_slotIndex</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• The index of this entry in the TLBSystem’s m_entries vector.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Primarily for debugging or bookkeeping; not strictly required for functional lookups.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">quint64 m_lastUsed</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• An age timestamp used in LRU replacement. Each time the emulator accesses or inserts this entry, m_lastUsed is set to ++m_ageCounter from the TLBSystem.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• When the TLB is full, TLBSystem::insert() scans m_lastUsed across all entries and evicts whichever slot has the smallest timestamp (i.e. least recently used).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">bool isInstructionEntry</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Distinguishes I-TLB vs. D-TLB.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• When the emulator performs an instruction‐fetch, it only probes entries with isInstructionEntry = true. Conversely, D-TLB lookups set isInstructionEntry = false.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;"><table style="border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; width:413px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">TLBSystem o-----------------------* TLBEntry</span></p>
</td>
<td style="vertical-align:top; width:468px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Property Implementation</span></p>
</td>
<td style="vertical-align:top; width:2948px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">About This Class-Implementation</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:413px; padding:0; border:none"><p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLBSystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;m_entries&nbsp;:&nbsp;QVector&lt;TLBEntry&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;m_lastUsed&nbsp;:&nbsp;QVector&lt;quint64&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;–&nbsp;m_ageCounter&nbsp;:&nbsp;quint64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;TLBSystem(int&nbsp;capacity)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;~TLBSystem()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;lookup(virtPage:&nbsp;quint64,&nbsp;asn:&nbsp;quint64)&nbsp;:&nbsp;TLBEntry*|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;insert(const&nbsp;TLBEntry&nbsp;&amp;newEntry)&nbsp;:&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;invalidateEntry(virtPage:&nbsp;quint64,&nbsp;asn:&nbsp;quint64)&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;invalidateByASN(asn:&nbsp;quint64)&nbsp;:&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;invalidateAll()&nbsp;:&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">|&nbsp;+&nbsp;debugDump()&nbsp;:&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-size: 11px;">+------------------------------------------------------+</span></p>
<p class="p_Normal">&nbsp;</p>
</td>
<td style="vertical-align:top; width:468px; padding:0; border:none"><p class="p_Normal"><span style="font-size: 11px; font-style: italic;">m_entries</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Allocated in the constructor as m_entries(capacity). Each element is a default‐constructed TLBEntry (initially invalid).</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Size is fixed at TLB “capacity” (e.g. 64 entries).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">m_lastUsed</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Also allocated in the constructor as m_lastUsed(capacity, 0), so every slot starts with timestamp 0.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Whenever lookup() or insert() touches slot i, we update m_lastUsed[i] = ++m_ageCounter.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Used by insert() to find the slot with the lowest m_lastUsed for eviction (LRU).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-size: 11px; font-style: italic;">m_ageCounter</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• 32- or 64-bit integer that increments on each TLB hit or insertion.</span></p>
<p class="p_Normal"><span style="font-size: 11px;">• Ensures that “most recently used” entries have the highest timestamp.</span></p>
</td>
<td style="vertical-align:top; width:2948px; padding:0; border:none"><p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-size:11px; font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-size: 11px;">Store a fixed‐size array of TLBEntry slots (QVector&lt;TLBEntry&gt; m_entries).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-size:11px; font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-size: 11px;">Track an LRU “age” (via QVector&lt;quint64&gt; m_lastUsed and a global quint64 m_ageCounter).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-size:11px; font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-size: 11px;">Provide lookups (lookup()) that, given (virtualPage, ASN), return a pointer to a valid TLBEntry (a “hit”) or nullptr (a “miss”).</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-size:11px; font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-size: 11px;">On a miss, allow insertion of a newly created TLBEntry (based on a page‐table walk or PAL routine) via insert(), evicting the LRU if there are no free slots.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-size:11px; font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-size: 11px;">Invalidate single entries (invalidateEntry()), all entries for a given ASN (invalidateByASN()), or the entire TLB (invalidateAll()).</span></p></td>
</tr>
</table>
</div>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_Normal"><span style="font-weight: bold;">Interfaces:</span></p>
<p class="p_Normal">Interface Ownership: <a href="alphamemorysystem-claude.html" class="topiclink">AlphaMemorySystem</a> <a href="translation-buffer-(tlb)-alphasystemmemory.html" class="topiclink">Translation Buffer (TLB)</a></p>
<p class="p_Normal">&nbsp;</p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">



function normHeaders() {
 var topicHeadHeight =  $("#idheaderbg > table").first().height() + 1,
	 $topicHeaderBox = $("#idheader"),
	 $topicContentBox = $("#idcontent"),
	 $navHeader = $("#navbar", parent.document),			 
	$navBox = $("div#hmnavframe", parent.document),
	 navHeaderHeight = $navHeader.height();
 if (topicHeadHeight != navHeaderHeight) {
	 $navHeader.css("height",topicHeadHeight + "px");
	 $navBox.css("top", topicHeadHeight + "px");
	 $topicHeaderBox.css("height", topicHeadHeight + "px");
		if ($topicHeaderBox.css("position") == "fixed"){
			$topicContentBox.css("margin-top", topicHeadHeight + "px");
			}
		}
    }
			 
  $(document).ready(function(){
    $(window).on('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
		$('.hmanchor').css('padding-top', y+20);
		$("div#hmsplitter", parent.document).css('width', '3px');
      }
	normHeaders();
    });
    
	 $(window).resize(); //trigger event for initially small displays
  });
 

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
