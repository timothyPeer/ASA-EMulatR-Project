<!DOCTYPE html>
<html>
<head>
   <title>Appendix &gt; Conversion Helper Functions &gt; Conversion Function - Header Snippet</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta name="description" content="Header-only reference snippet (.H only, ASCII, with inline documentation)" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        min-height: 60px; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        background: #2C5D88;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { min-height: 59px;}             
      #idheader h1 span { color: #FFF }     
      #idnav {
        text-align: right;
        width: 126px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_orange.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; }
	  p.help-url a:link { font-size: 50%; text-decoration: none; color: black; }
	  p.help-url a:visited { color: black; }
	  p.help-url a:hover { font-size: 95%; text-decoration: underline; }
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
	  a#printbuttonlink { cursor: pointer; }
      a.hmanchor { display: inline-block; margin-top: -4em; padding-top: 4em; }  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "conversion-function---header-s.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Conversion Function - Header Snippet</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:middle">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.html?conversion-function---header-s.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      Appendix &gt; <a href="conversion-helper-functions.html">Conversion Helper Functions</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Conversion Function - Header Snippet</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="conversion-function---catalog.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="conversion-helper-functions.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="integration-helpers-conversionfunctions.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<p class="p_Normal">Header-only reference snippet (.H only, ASCII, with inline documentation)</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Note: This is documentation-grade reference code intended to live in OptimizedExceptionStatusRegister.h (or a nearby inline header) and match your existing types: dt_gfloat, FpRoundingMode, and the emulator’s status register. Replace or align the FPCR accessors/macros as needed by your codebase. All comments include source references to ASA/VAX topics described above.</p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#pragma&nbsp;once</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;OptimizedExceptionStatusRegister_Conversions.H</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Header-only&nbsp;conversion&nbsp;helpers&nbsp;for&nbsp;Alpha/VAX&nbsp;FP&nbsp;and&nbsp;integer&nbsp;boundaries.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Encoding:&nbsp;UTF-8&nbsp;(no&nbsp;BOM),&nbsp;ASCII&nbsp;characters&nbsp;only</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Source&nbsp;references:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;-&nbsp;Alpha&nbsp;System&nbsp;Architecture&nbsp;(ASA),&nbsp;Floating-Point&nbsp;Architecture:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;Rounding&nbsp;modes,&nbsp;exception&nbsp;flags,&nbsp;FPCR&nbsp;fields,&nbsp;NaN/Inf&nbsp;behavior.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;-&nbsp;VAX&nbsp;G_float&nbsp;specification:&nbsp;exponent&nbsp;bias&nbsp;(1024),&nbsp;fraction&nbsp;layout,</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;reserved&nbsp;operand&nbsp;encoding&nbsp;and&nbsp;mapping&nbsp;to&nbsp;IEEE&nbsp;NaN&nbsp;on&nbsp;conversion.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;-&nbsp;IEEE-754&nbsp;background:&nbsp;exactness&nbsp;thresholds&nbsp;(2^53&nbsp;for&nbsp;double,&nbsp;2^24&nbsp;for&nbsp;single).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;These&nbsp;helpers&nbsp;DO&nbsp;NOT&nbsp;raise&nbsp;traps;&nbsp;they&nbsp;only&nbsp;classify&nbsp;results.&nbsp;Instruction</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;grains&nbsp;must&nbsp;set&nbsp;status&nbsp;bits&nbsp;and&nbsp;raise&nbsp;traps&nbsp;as&nbsp;directed&nbsp;by&nbsp;FPCR&nbsp;enables.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&lt;QtGlobal&gt;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&lt;cmath&gt;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;dt_gfloat.h&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Assumed&nbsp;to&nbsp;define&nbsp;VAX&nbsp;G_float&nbsp;type,&nbsp;bit&nbsp;ops,&nbsp;and&nbsp;helpers</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;AlphaFpEnums.h&quot;&nbsp;&nbsp;//&nbsp;Assumed&nbsp;to&nbsp;define&nbsp;FpRoundingMode</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;AlphaTypes.h&quot;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;qint64,&nbsp;quint64,&nbsp;etc.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Canonical&nbsp;conversion&nbsp;result&nbsp;used&nbsp;by&nbsp;all&nbsp;helpers.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">struct&nbsp;CvtfpConversionResult</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;&nbsp;&nbsp;&nbsp;fpOut{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;IEEE&nbsp;result&nbsp;for&nbsp;FP&nbsp;targets&nbsp;(S/T),&nbsp;else&nbsp;0.0</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;qint64&nbsp;&nbsp;&nbsp;&nbsp;intOut{};&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Integer&nbsp;result&nbsp;for&nbsp;FP-&gt;INT,&nbsp;else&nbsp;0</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;dt_gfloat&nbsp;gOut{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;VAX&nbsp;G_float&nbsp;when&nbsp;destination&nbsp;is&nbsp;G,&nbsp;else&nbsp;default</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;invalid{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Invalid&nbsp;operation&nbsp;occurred</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;overflow{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overflow&nbsp;occurred</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;underflow{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Underflow&nbsp;occurred</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;inexact{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Inexact&nbsp;occurred</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;isNaNInput{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Input&nbsp;was&nbsp;NaN&nbsp;(IEEE)&nbsp;or&nbsp;reserved&nbsp;operand&nbsp;(VAX)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;isInfInput{};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Input&nbsp;was&nbsp;+/-Infinity&nbsp;(IEEE)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;isSubnormalInput{};&nbsp;//&nbsp;Input&nbsp;was&nbsp;subnormal&nbsp;(IEEE&nbsp;S/T)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Helper:&nbsp;classify&nbsp;IEEE&nbsp;inputs&nbsp;(NaN,&nbsp;Inf,&nbsp;subnormal).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;ASA:&nbsp;NaN/Inf&nbsp;detection&nbsp;-&gt;&nbsp;invalid&nbsp;for&nbsp;FP-&gt;INT,&nbsp;NaN&nbsp;propagation&nbsp;for&nbsp;FP-&gt;FP.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;void&nbsp;classifyIeee(double&nbsp;v,&nbsp;CvtfpConversionResult&amp;&nbsp;r)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(std::isnan(v))&nbsp;&nbsp;{&nbsp;r.isNaNInput&nbsp;=&nbsp;true;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(std::isinf(v))&nbsp;&nbsp;{&nbsp;r.isInfInput&nbsp;=&nbsp;true;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!r.isNaNInput&nbsp;&amp;&amp;&nbsp;!r.isInfInput)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;subnormal&nbsp;classification;&nbsp;zero&nbsp;is&nbsp;not&nbsp;subnormal</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(v&nbsp;!=&nbsp;0.0&nbsp;&amp;&amp;&nbsp;std::fpclassify(v)&nbsp;==&nbsp;FP_SUBNORMAL)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.isSubnormalInput&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvttqConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;IEEE&nbsp;double&nbsp;-&gt;&nbsp;signed&nbsp;64-bit&nbsp;integer&nbsp;(CVTTQ&nbsp;family).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;ASA:&nbsp;Invalid&nbsp;on&nbsp;NaN/Inf&nbsp;or&nbsp;out-of-range;&nbsp;inexact&nbsp;when&nbsp;fractional&nbsp;bits&nbsp;are&nbsp;discarded.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvttqConversion(double&nbsp;src)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r{};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;classifyIeee(src,&nbsp;r);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(r.isNaNInput&nbsp;||&nbsp;r.isInfInput)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.invalid&nbsp;=&nbsp;true;&nbsp;&nbsp;//&nbsp;ASA:&nbsp;FP-&gt;INT&nbsp;invalid&nbsp;on&nbsp;NaN/Inf</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Range&nbsp;check&nbsp;for&nbsp;signed&nbsp;64-bit</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;constexpr&nbsp;long&nbsp;double&nbsp;MIN_Q&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(std::numeric_limits&lt;qint64&gt;::min());</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;constexpr&nbsp;long&nbsp;double&nbsp;MAX_Q&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(std::numeric_limits&lt;qint64&gt;::max());</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;long&nbsp;double&nbsp;ld&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(src);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ld&nbsp;&lt;&nbsp;MIN_Q&nbsp;||&nbsp;ld&nbsp;&gt;&nbsp;MAX_Q)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.invalid&nbsp;=&nbsp;true;&nbsp;&nbsp;&nbsp;//&nbsp;Many&nbsp;Alpha&nbsp;docs&nbsp;mark&nbsp;this&nbsp;as&nbsp;invalid&nbsp;rather&nbsp;than&nbsp;overflow&nbsp;for&nbsp;FP-&gt;INT</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.overflow&nbsp;=&nbsp;true;&nbsp;&nbsp;//&nbsp;Record&nbsp;overflow&nbsp;as&nbsp;well&nbsp;for&nbsp;diagnostics</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Truncate&nbsp;toward&nbsp;zero&nbsp;for&nbsp;CVTTQ-like&nbsp;behavior.&nbsp;If&nbsp;a&nbsp;different&nbsp;rounding&nbsp;mode&nbsp;is&nbsp;specified</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;by&nbsp;the&nbsp;instruction&nbsp;variant,&nbsp;call&nbsp;a&nbsp;mode-based&nbsp;rounding&nbsp;routine&nbsp;instead.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;double&nbsp;truncated&nbsp;=&nbsp;(src&nbsp;&lt;&nbsp;0.0)&nbsp;?&nbsp;std::ceil(src)&nbsp;:&nbsp;std::floor(src);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.intOut&nbsp;=&nbsp;static_cast&lt;qint64&gt;(truncated);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Inexact&nbsp;if&nbsp;fractional&nbsp;part&nbsp;discarded</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(src&nbsp;!=&nbsp;truncated)&nbsp;r.inexact&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvtqtConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Signed&nbsp;64-bit&nbsp;integer&nbsp;-&gt;&nbsp;IEEE&nbsp;double&nbsp;(CVTQT).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;ASA:&nbsp;No&nbsp;invalid.&nbsp;Inexact&nbsp;only&nbsp;when&nbsp;|src|&nbsp;&gt;&nbsp;2^53&nbsp;(not&nbsp;exactly&nbsp;representable&nbsp;in&nbsp;double).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvtqtConversion(qint64&nbsp;src,&nbsp;FpRoundingMode&nbsp;mode)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Q_UNUSED(mode);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r{};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.fpOut&nbsp;=&nbsp;static_cast&lt;double&gt;(src);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Exactness&nbsp;threshold:&nbsp;integers&nbsp;with&nbsp;magnitude&nbsp;&lt;=&nbsp;2^53&nbsp;are&nbsp;exactly&nbsp;representable&nbsp;in&nbsp;double.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;constexpr&nbsp;long&nbsp;double&nbsp;EXACT_BOUND&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(1ULL&nbsp;&lt;&lt;&nbsp;53);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(static_cast&lt;long&nbsp;double&gt;(src)&nbsp;&gt;&nbsp;&nbsp;EXACT_BOUND&nbsp;||</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static_cast&lt;long&nbsp;double&gt;(src)&nbsp;&lt;&nbsp;-EXACT_BOUND)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.inexact&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvtqsConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Signed&nbsp;64-bit&nbsp;integer&nbsp;-&gt;&nbsp;IEEE&nbsp;single&nbsp;(CVTQS).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;ASA:&nbsp;Overflow&nbsp;possible&nbsp;for&nbsp;magnitudes&nbsp;beyond&nbsp;single&nbsp;range;&nbsp;inexact&nbsp;unless&nbsp;|src|&nbsp;&lt;=&nbsp;2^24.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvtqsConversion(qint64&nbsp;src,&nbsp;FpRoundingMode&nbsp;mode)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Q_UNUSED(mode);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r{};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Convert&nbsp;via&nbsp;double,&nbsp;caller&nbsp;will&nbsp;narrow&nbsp;to&nbsp;float&nbsp;on&nbsp;store.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.fpOut&nbsp;=&nbsp;static_cast&lt;double&gt;(src);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Single-precision&nbsp;overflow&nbsp;threshold&nbsp;~&nbsp;2^128&nbsp;is&nbsp;not&nbsp;the&nbsp;correct&nbsp;bound;&nbsp;use&nbsp;float&nbsp;max.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;long&nbsp;double&nbsp;fmax&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(std::numeric_limits&lt;float&gt;::max());</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(static_cast&lt;long&nbsp;double&gt;(std::llabs(src))&nbsp;&gt;&nbsp;fmax)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.overflow&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Exactness&nbsp;threshold:&nbsp;|src|&nbsp;&lt;=&nbsp;2^24&nbsp;is&nbsp;exactly&nbsp;representable&nbsp;in&nbsp;IEEE&nbsp;single.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;constexpr&nbsp;long&nbsp;double&nbsp;EXACT_BOUND_S&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(1ULL&nbsp;&lt;&lt;&nbsp;24);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(static_cast&lt;long&nbsp;double&gt;(src)&nbsp;&gt;&nbsp;&nbsp;EXACT_BOUND_S&nbsp;||</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static_cast&lt;long&nbsp;double&gt;(src)&nbsp;&lt;&nbsp;-EXACT_BOUND_S)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.inexact&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;VAX&nbsp;helpers&nbsp;assume&nbsp;dt_gfloat&nbsp;provides:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;static&nbsp;bool&nbsp;isReservedOperand(const&nbsp;dt_gfloat&amp;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;static&nbsp;dt_gfloat&nbsp;fromIEEE(double,&nbsp;FpRoundingMode,&nbsp;bool*&nbsp;overflow,&nbsp;bool*&nbsp;underflow,&nbsp;bool*&nbsp;inexact)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;static&nbsp;double&nbsp;&nbsp;&nbsp;toIEEE(const&nbsp;dt_gfloat&amp;,&nbsp;FpRoundingMode,&nbsp;bool*&nbsp;underflow,&nbsp;bool*&nbsp;inexact)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Mapping&nbsp;notes:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;IEEE&nbsp;NaN/Inf&nbsp;-&gt;&nbsp;VAX&nbsp;reserved&nbsp;operand&nbsp;(invalid).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;VAX&nbsp;reserved&nbsp;operand&nbsp;-&gt;&nbsp;IEEE&nbsp;quiet&nbsp;NaN&nbsp;(invalid).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;&nbsp;&nbsp;Bias&nbsp;adjust:&nbsp;IEEE(1023)&nbsp;&lt;-&gt;&nbsp;VAX&nbsp;G(1024).&nbsp;Fraction&nbsp;bit&nbsp;order&nbsp;remapped&nbsp;by&nbsp;dt_gfloat&nbsp;helpers.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvtdgConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;IEEE&nbsp;double&nbsp;-&gt;&nbsp;VAX&nbsp;G_float&nbsp;(CVTDG).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;ASA/VAX:&nbsp;NaN/Inf&nbsp;map&nbsp;to&nbsp;reserved&nbsp;operand;&nbsp;set&nbsp;invalid.&nbsp;Mode&nbsp;controls&nbsp;rounding&nbsp;of&nbsp;fraction.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvtdgConversion(</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;src,&nbsp;FpRoundingMode&nbsp;mode&nbsp;/*&nbsp;=&nbsp;FpRoundingMode::RZ&nbsp;*/)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r{};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;classifyIeee(src,&nbsp;r);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(r.isNaNInput&nbsp;||&nbsp;r.isInfInput)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.invalid&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.gOut&nbsp;=&nbsp;dt_gfloat::reservedOperand();&nbsp;//&nbsp;Project&nbsp;convention&nbsp;for&nbsp;a&nbsp;canonical&nbsp;reserved&nbsp;operand</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;of=false,&nbsp;uf=false,&nbsp;ix=false;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.gOut&nbsp;=&nbsp;dt_gfloat::fromIEEE(src,&nbsp;mode,&nbsp;&amp;of,&nbsp;&amp;uf,&nbsp;&amp;ix);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.overflow&nbsp;&nbsp;=&nbsp;of;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.underflow&nbsp;=&nbsp;uf;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.inexact&nbsp;&nbsp;&nbsp;=&nbsp;ix;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvtgdConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;VAX&nbsp;G_float&nbsp;-&gt;&nbsp;IEEE&nbsp;double&nbsp;(CVTGD).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Reserved&nbsp;operand&nbsp;-&gt;&nbsp;quiet&nbsp;NaN,&nbsp;invalid=true.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvtgdConversion(</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;dt_gfloat&amp;&nbsp;src,&nbsp;FpRoundingMode&nbsp;mode&nbsp;/*&nbsp;=&nbsp;FpRoundingMode::RZ&nbsp;*/)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r{};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(dt_gfloat::isReservedOperand(src))&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.invalid&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.isNaNInput&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Produce&nbsp;a&nbsp;quiet&nbsp;NaN.&nbsp;If&nbsp;your&nbsp;dt_sfloat/dt_tfloat&nbsp;provide&nbsp;quietNaN(),&nbsp;use&nbsp;that;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;otherwise&nbsp;synthesize&nbsp;an&nbsp;IEEE&nbsp;qNaN&nbsp;via&nbsp;std::numeric_limits&lt;double&gt;::quiet_NaN().</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.fpOut&nbsp;=&nbsp;std::numeric_limits&lt;double&gt;::quiet_NaN();</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;uf=false,&nbsp;ix=false;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.fpOut&nbsp;=&nbsp;dt_gfloat::toIEEE(src,&nbsp;mode,&nbsp;&amp;uf,&nbsp;&amp;ix);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;classifyIeee(r.fpOut,&nbsp;r);&nbsp;//&nbsp;Sets&nbsp;isSubnormalInput&nbsp;if&nbsp;the&nbsp;result&nbsp;is&nbsp;subnormal</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.underflow&nbsp;=&nbsp;uf;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;r.inexact&nbsp;&nbsp;&nbsp;=&nbsp;ix;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">/*</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;checkCvtgfConversion</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;VAX&nbsp;G_float&nbsp;-&gt;&nbsp;IEEE&nbsp;single&nbsp;(CVTGF).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*&nbsp;Implemented&nbsp;as&nbsp;G&nbsp;-&gt;&nbsp;double&nbsp;(round)&nbsp;then&nbsp;caller&nbsp;narrows&nbsp;to&nbsp;float&nbsp;at&nbsp;store.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;*/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Q_ALWAYS_INLINE&nbsp;static&nbsp;CvtfpConversionResult&nbsp;checkCvtgfConversion(</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;dt_gfloat&amp;&nbsp;src,&nbsp;FpRoundingMode&nbsp;mode&nbsp;/*&nbsp;=&nbsp;FpRoundingMode::RZ&nbsp;*/)&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;CvtfpConversionResult&nbsp;r&nbsp;=&nbsp;checkCvtgdConversion(src,&nbsp;mode);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!r.invalid)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;single-precision&nbsp;overflow&nbsp;after&nbsp;rounding-to-single&nbsp;(performed&nbsp;by&nbsp;the&nbsp;caller&nbsp;on&nbsp;store).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;long&nbsp;double&nbsp;fmax&nbsp;=&nbsp;static_cast&lt;long&nbsp;double&gt;(std::numeric_limits&lt;float&gt;::max());</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!std::isnan(r.fpOut)&nbsp;&amp;&amp;&nbsp;!std::isinf(r.fpOut))&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(std::fabsl(static_cast&lt;long&nbsp;double&gt;(r.fpOut))&nbsp;&gt;&nbsp;fmax)&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.overflow&nbsp;=&nbsp;true;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Underflow&nbsp;already&nbsp;set&nbsp;by&nbsp;toIEEE;&nbsp;keep&nbsp;it&nbsp;if&nbsp;result&nbsp;is&nbsp;tiny&nbsp;for&nbsp;single&nbsp;as&nbsp;well.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Inexact&nbsp;is&nbsp;propagated&nbsp;from&nbsp;the&nbsp;G-&gt;IEEE&nbsp;conversion&nbsp;rounding&nbsp;step.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">



function normHeaders() {
 var topicHeadHeight =  $("#idheaderbg > table").first().height() + 1,
	 $topicHeaderBox = $("#idheader"),
	 $topicContentBox = $("#idcontent"),
	 $navHeader = $("#navbar", parent.document),			 
	$navBox = $("div#hmnavframe", parent.document),
	 navHeaderHeight = $navHeader.height();
 if (topicHeadHeight != navHeaderHeight) {
	 $navHeader.css("height",topicHeadHeight + "px");
	 $navBox.css("top", topicHeadHeight + "px");
	 $topicHeaderBox.css("height", topicHeadHeight + "px");
		if ($topicHeaderBox.css("position") == "fixed"){
			$topicContentBox.css("margin-top", topicHeadHeight + "px");
			}
		}
    }
			 
  $(document).ready(function(){
    $(window).on('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
		$('.hmanchor').css('padding-top', y+20);
		$("div#hmsplitter", parent.document).css('width', '3px');
      }
	normHeaders();
    });
    
	 $(window).resize(); //trigger event for initially small displays
  });
 

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
